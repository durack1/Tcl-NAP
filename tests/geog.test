# geog.test --
# 
# Test text I/O functions defined in file $env(LIBRARY_DIR)/geog.tcl
#
# Copyright (c) 2003, CSIRO Australia
# Author: Harvey Davies, CSIRO Atmospheric Research
# $Id: geog.test,v 1.3 2005/05/24 02:48:45 dav480 Exp $

proc put_info text {
    # puts "${text}: [llength [list_naos]] NAOs using [lindex [nap_info bytes] 0] bytes"
}

source $env(LIBRARY_DIR)/geog.tcl

Test geog-1.1 {put_text_surfer} {
    nap "z = {
	{91.03 60.55}
	{96.04 62.38}
	{92.10 65.09}
    }"
    nap "y = 3 ...  0.0 .. 7.0"
    nap "x = {0.0 9.0}"
    $z set coo y x
    put_text_surfer z surfer.txt
    unset x y z
    gets_file surfer.txt
} {DSAA
2 3
0 9
0 7
60.55 96.04
91.03 60.55
96.04 62.38
 92.1 65.09
}

file delete surfer.txt

Test geog-2.1 {put_gridascii} {
    nap "z = {
	{91.03 60.55}
	{96.04 _}
	{92.10 65.09}
    }"
    nap "y = 3 ...  0.0 .. 7.0"
    nap "x = {0.0 3.5}"
    $z set coo y x
    put_gridascii z gridascii.txt
    unset x y z
    gets_file gridascii.txt
} {NCOLS 2
NROWS 3
XLLCORNER -1.75
YLLCORNER -1.75
CELLSIZE 3.5
NODATA_VALUE 1e9
92.1 65.09
96.04 1e9
91.03 60.55
}

Test geog-2.2 {get_gridascii} {
    [nap "in = get_gridascii('gridascii.txt')"]
} {92.10 65.09
96.04     _
91.03 60.55}

file delete gridascii.txt

Test geog-2.3 {get_gridascii check cv 0} {
    [$in coo 0]
} {7 3.5 0}

Test geog-2.4 {get_gridascii check cv 1} {
    [$in coo 1]
} {0 3.5}

unset in
