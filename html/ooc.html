<!-- $Id: ooc.html,v 1.1 2002/08/07 08:09:24 dav480 Exp $ -->
<html>

<head> <title>
NAP OOCs
</title> </head>

<body>

<h2> <center>
NAP Object-Oriented Commands (OOCs)
</center> </h2>

<h3>Methods which return Data Values (with or without metadata)</h3>

<h4>Method <code>all</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> all</CODE>
<CODE>-format</CODE> <VAR>format</VAR>
<CODE>-columns</CODE> <VAR>int</VAR>
<CODE>-lines</CODE> <VAR>int</VAR>
<CODE>-missing</CODE> <VAR>text</VAR>
<CODE>-keep</CODE><br>

<p>
This provides both data and metadata from a NAO.
However it does not provide <em>all</em> information despite the name!

<p>
        The following switches are allowed:
<BR><CODE>-format</CODE> <VAR>format</VAR>: C format (default: "" meaning automatic)
<BR><CODE>-columns</CODE> <VAR>int</VAR>: maximum # columns (default:  6) (<code>-1</code>: no limit)
<BR><CODE>-lines</CODE> <VAR>int</VAR>:   maximum # lines   (default: 20) (<code>-1</code>: no limit)
<BR><CODE>-list</CODE>: print in tcl list form (using braces) e.g. "<code>{1 9 2}</code>"
<BR><CODE>-missing</CODE> <VAR>text</VAR>: text printed for missing value (default: "_")
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0

<p>
The <code>all</code> method provides the same information as the two commands:
<br>
<VAR>ooc_name</VAR><CODE> header</CODE><br>
<VAR>ooc_name</VAR><CODE> value</CODE>
<CODE>-format</CODE> <VAR>format</VAR>
<CODE>-columns</CODE> <VAR>int</VAR>
<CODE>-lines</CODE> <VAR>int</VAR>
<CODE>-missing</CODE> <VAR>text</VAR><br>

<p>
Example:
<pre>
% [nap "{3#2 2#_ -9}"] all -miss n/a
::NAP::39-39  i32  MissingValue: -2147483648  References: 0  Unit: (NULL)
Dimension 0   Size: 6      Name: (NULL)    Coordinate-variable: (NULL)
Value:
2 2 2 n/a n/a -9
</pre>

<h4>Method <code>value</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> value</CODE>
<CODE>-format</CODE> <VAR>format</VAR>
<CODE>-columns</CODE> <VAR>int</VAR>
<CODE>-lines</CODE> <VAR>int</VAR>
<CODE>-missing</CODE> <VAR>text</VAR>
<CODE>-keep</CODE><br>

<p>
This returns data values.
The default value is <code>-1</code> for both
the switches <CODE>-columns</CODE> and <CODE>-lines</CODE>,
giving the entire array.

<p>
The following switches are allowed:
<BR><CODE>-format</CODE> <VAR>format</VAR>: C format (default: "" meaning automatic)
<BR><CODE>-columns</CODE> <VAR>int</VAR>: maximum # columns (default: <code>-1</code> i.e. no limit)
<BR><CODE>-lines</CODE>   <VAR>int</VAR>: maximum # lines   (default: <code>-1</code> i.e. no limit)
<BR><CODE>-list</CODE>: print in tcl list form (using braces) e.g. "<code>{1 9 2}</code>"
<BR><CODE>-missing</CODE> <VAR>text</VAR>: text printed for missing value (default: "_")
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0

<p>
The following example begins with the definition of vectors 
&quot;<code>x</code>&quot; and &quot;<code>y</code>&quot; for use
in this and subsequent examples:
<pre>
% nap "x = 0 .. 2 ... 0.5"
::NAP::58-58
% nap "y = x ** 2"
::NAP::61-61
% $y val -format %0.3f
0.000 0.250 1.000 2.250 4.000
</pre>

<h4>Default method</h4>
<p>
<var>ooc_name</var>
<CODE>-format</CODE> <var>format</var>
<CODE>-columns</CODE> <var>int</var>
<CODE>-lines</CODE> <var>int</var>
<CODE>-missing</CODE> <var>text</var>
<CODE>-keep</CODE><br>

<p>
This returns data values in a similar fashion to the
<code>value</code> method, except that default line and column
limits restrict the size.

<p>
The following switches are allowed:
<BR><CODE>-format</CODE> <var>format</var>: C format (default: 
<code>""</code> meaning automatic)
<BR><CODE>-columns</CODE> <var>int</var>: maximum # columns 
(default: <code>6</code>) (<code>-1</code>: no limit)
<BR><CODE>-lines</CODE> <var>int</var>: maximum # lines (default: 
<code>20</code>) (<code>-1</code>: no limit)
<BR><CODE>-list</CODE>: print in tcl list form (using braces) e.g. "<code>{1 9 2}</code>"
<BR><CODE>-missing</CODE> <VAR>text</VAR>: text printed for missing value 
(default: <code>"_"</code>)
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0

<p>
The following example shows why and how to use switch <code>-columns</code>
(abbreviated to <code>-c</code>):
<pre>
% nap "m = reshape(0 .. 99, {10 12})"
::NAP::50-50
% $m
 0  1  2  3  4  5 ..
12 13 14 15 16 17 ..
24 25 26 27 28 29 ..
36 37 38 39 40 41 ..
48 49 50 51 52 53 ..
60 61 62 63 64 65 ..
72 73 74 75 76 77 ..
84 85 86 87 88 89 ..
96 97 98 99  0  1 ..
 8  9 10 11 12 13 ..
% $m -c -1
 0  1  2  3  4  5  6  7  8  9 10 11
12 13 14 15 16 17 18 19 20 21 22 23
24 25 26 27 28 29 30 31 32 33 34 35
36 37 38 39 40 41 42 43 44 45 46 47
48 49 50 51 52 53 54 55 56 57 58 59
60 61 62 63 64 65 66 67 68 69 70 71
72 73 74 75 76 77 78 79 80 81 82 83
84 85 86 87 88 89 90 91 92 93 94 95
96 97 98 99  0  1  2  3  4  5  6  7
 8  9 10 11 12 13 14 15 16 17 18 19
</pre>

<p>
The following example shows how to use switch <code>-format</code>
(abbreviated to <code>-f</code>) to include a dollar prefix and display
two decimal places:
<pre>
% [nap "{15 3.2 999}"] -f {$%.2f}
$15.00 $3.20 $999.00
</pre>

<p>
The following example shows how to use switch <code>-list</code>:
<pre>
% [nap "reshape(1.5 .. -1.5, {2 5})"] -list
{
{  1.5  0.5 -0.5 -1.5  1.5 }
{  0.5 -0.5 -1.5  1.5  0.5 }
}
</pre>

<h4>Format Conversion Strings</h4>

<p>
The <code>-format</code> option specifies a <i>format conversion string</i>
similar to that used in the standard Tcl <code>format</code> command
(which is based on the ANSI C <code>sprintf()</code> function).
Such strings have the form <br>
<code>%</code>[<var>flags</var>][<var>width</var>][<code>.</code><var>precision</var>]<var>char</var>
<br>
where:
<ul>

    <li>
	<var>flags</var> is a string containing any of the following characters in any order:
	    <br>
	    <code>-</code>: left justify
	    <br>
	    <code>+</code>: include sign
	    <br>
	    <em>space</em>: include space prefix if no sign
	    <br>
	    <code>0</code>: leading zeros
	    <br>
	    <code>#</code>: alternate form

    <li>
	<var>width</var> is the minimum field width

    <li>
	<var>precision</var> is the
	    <ul>
		<li>
		    minimum number of digits for 
		    <code>d</code>,
		    <code>i</code>,
		    <code>o</code>,
		    <code>x</code>,
		    <code>X</code>
		    or
		    <code>u</code>
		    conversions.
		<li>
		    number of digits after &quot;.&quot; for
		    <code>e</code>, <code>E</code> or <code>f</code> conversions.
		<li>
		    number of significant digits for <code>g</code> or <code>G</code> conversions.
	    </ul>

    <li>
	<var>char</var> specifies conversion as in the following table:

<table border>

  <tr>
    <td align=center><var>char</var>
    <th align=center>Convert to

<tbody>

  <tr> <td> <code>
	<code>d</code>, <code>i</code>
  </code> <td>
	signed decimal integer

  <tr valign=top> <td> <code>
	<code>o</code>
  </code> <td>
	unsigned octal integer

  <tr valign=top> <td> <code>
	<code>x</code>, <code>X</code>
  </code> <td>
	unsigned hexadecimal integer

  <tr valign=top> <td> <code>
	<code>u</code>
  </code> <td>
	unsigned decimal integer

  <tr valign=top> <td> <code>
	<code>c</code>
  </code> <td>
	character

  <tr valign=top> <td> <code>
	<code>f</code>
  </code> <td>
    decimal number in form 
    [<code>-</code>]<var>mmm</var><code>.</code><var>ddd</var>,
    <br>
    where number of <var>d</var>s is specified by the <var>precision</var>.
    <br>
    Default <var>precision</var> is 6;
    <var>precision</var> of 0 suppresses the &quot;<code>.</code>&quot;.

  <tr valign=top> <td> <code>
	<code>e</code>, <code>E</code>
  </code> <td>
    decimal number in form 
    [<code>-</code>]<var>m</var><code>.</code><var>dddddd</var><code>e</code>&plusmn;<var>xx</var>
    or
    [<code>-</code>]<var>m</var><code>.</code><var>dddddd</var><code>E</code>&plusmn;<var>xx</var>,
    <br>
    where number of <var>d</var>s is specified by the <var>precision</var>.
    <br>
    Default <var>precision</var> is 6;
    <var>precision</var> of 0 suppresses the &quot;<code>.</code>&quot;.

  <tr valign=top> <td> <code>
	<code>g</code>, <code>G</code>
  </code> <td>
    <code>%e</code>
    or
    <code>%E</code>
    are used if <var>exponent</var> &lt; &minus;4 or 
    <var>exponent</var> &ge; <var>precision</var>; 
    <br>
    otherwise 
    <code>%f</code>
    is used.
    <br>
    Trailing zeros and decimal points are suppressed.

</table>

</ul>

<p>
The following example displays the same data using each of these codes.
Note that
(unlike C and the standard Tcl <code>format</code> command)
any data-type can be displayed with any code.

<pre>
% foreach code {d i o x X u c f E e g G} {
    puts "$code: [[nap "88 .. 92"] -f "%$code"]"
}
d: 88 89 90 91 92
i: 88 89 90 91 92
o: 130 131 132 133 134
x: 58 59 5a 5b 5c
X: 58 59 5A 5B 5C
u: 88 89 90 91 92
c: XYZ[\
f: 88.000000 89.000000 90.000000 91.000000 92.000000
E: 8.800000E+01 8.900000E+01 9.000000E+01 9.100000E+01 9.200000E+01
e: 8.800000e+01 8.900000e+01 9.000000e+01 9.100000e+01 9.200000e+01
g: 88 89 90 91 92
G: 88 89 90 91 92
</pre>

<h3>Methods which return Metadata</h3>

<h4>Method <code>coordinate</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> coordinate</CODE> ?<VAR>dim_name</VAR>|<VAR>dim_number</VAR>? ?<VAR>dim_name</VAR>|<VAR>dim_number</VAR>? &hellip;<br>

<p>
This returns the OOC-names of the coordinate variables of selected dimensions.
If no dimensions are specified then the effect is the same as:<br>
<VAR>ooc_name</VAR><CODE> coo</CODE> 0 1 2 &hellip; rank-1"<br>

<p>
Example:
<pre>
% $y set coo x
% $y coo
::NAP::58-58
% [$y coo]
0 0.5 1 1.5 2
</pre>

<h4>Method <code>count</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> count</CODE>
<CODE>-keep</CODE><br>

<p>
This returns the reference count.

<p>
Example (using <code>x</code> defined in previous example):
<pre>
% $x count
2
</pre>
Note that the reference count is 2 because this NAO is referenced by both
<li>Tcl variable <code>x</code>
<li> coordinate variable pointer of NAO <code>::NAP::61-61</code> 

<h4>Method <code>datatype</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> datatype</CODE><br>

<p>
This returns the
data-type.

<p>
Example:
<pre>
% [nap "'hello'"] dat
c8
</pre>

<h4>Method <code>dimension</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> dimension</CODE> ?<VAR>dim_number</VAR>? ?<VAR>dim_number</VAR>? &hellip;<br>

<p>
This returns
the dimension names.<br>

<p>
<VAR>ooc_name</VAR><CODE> di</CODE><br>
is equivalent to:<br>
<VAR>ooc_name</VAR><CODE> di</CODE> 0 1 2 &hellip; rank-1"<br>

<p>
Example (again continuing above example):
<pre>
% $y dim
x
</pre>

<h4>Method <code>header</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> header</CODE>
<CODE>-keep</CODE><br>

<p>
This returns similar information to the following 
(but using a different format):
<br>
<VAR>ooc_name</VAR><CODE> ooc</CODE><br>
<VAR>ooc_name</VAR><CODE> datatype</CODE><br>
<VAR>ooc_name</VAR><CODE> missing</CODE><br>
<VAR>ooc_name</VAR><CODE> count</CODE><br>
<VAR>ooc_name</VAR><CODE> unit</CODE><br>
<VAR>ooc_name</VAR><CODE> shape</CODE><br>
<VAR>ooc_name</VAR><CODE> dimension</CODE><br>
<VAR>ooc_name</VAR><CODE> coordinate</CODE><br>

<p>
Example (continuing above example):
<pre>
% $y header
::NAP::61-61  f64  MissingValue: NaN  References: 1  Unit: (NULL)
Dimension 0   Size: 5      Name: x         Coordinate-variable: ::NAP::58-58
% 
</pre>

<h4>Method <code>label</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> label</CODE><br>

<p>
This returns
the label (title, etc.) of the NAO.

<p>
Example:
<pre>
% $y set label "areas of squares"
% $y label
areas of squares
</pre>

<h4>Method <code>link</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> link</CODE><br>

<p>
This returns
         the OOC-name of the link NAO.

<p>
Example:
<pre>
% $y set link [nap 42]
% [$y link]
42
</pre>

<h4>Method <code>missing</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> missing</CODE><br>

<p>
This returns
the missing value.
This is the value used to indicate null or undefined data.

<p>
Example:
<pre>
% $y miss
NaN
</pre>

<h4>Method <code>ooc</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> ooc</CODE>
<CODE>-keep</CODE><br>

<p>
This returns
        the OOC-name of the NAO.

<p>
Example:
<pre>
$y ooc
::NAP::61-61
</pre>

<h4>Method <code>rank</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> rank</CODE><br>

<p>
This returns
the rank (number of dimensions).

<p>
Example:
<pre>
% $y rank
1
</pre>

<h4>Method <code>sequence</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> sequence</CODE>
<CODE>-keep</CODE><br>

<p>
This returns
the sequence number of the NAO. E.g. 42 for <code>nao.42-9</code><br>
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0

<p>
Example:
<pre>
% $y seq
61
</pre>

<h4>Method <code>shape</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> shape</CODE><br>

<p>
This returns
the shape, which is a vector of dimension sizes.

<p>
Example:
<pre>
% $y shape
5
</pre>

<h4>Method <code>slot</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> slot</CODE>
<CODE>-keep</CODE><br>

<p>
This returns
    the slot number of the NAO. E.g. 9 for <code>nao.42-9</code> <BR>

<p>
Example:
<pre>
% $y sl
61
</pre>

<h4>Method <code>step</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> step</CODE><br>

<p>
This returns
a code which
indicates whether step sizes of a vector are equal, and if not, their sign.
NAP uses this information for efficiency.
It indicates whether a vector (not relevant for other ranks)
is monotonically ascending/descending,
and if so whether it is an arithmetic progression (AP).
The result code is one of following strings:
<li>"<CODE>+-</CODE>": at least one positive step and one negative step
<li>"<CODE>>= 0</CODE>": all steps >= 0
<li>"<CODE><= 0</CODE>": all steps <= 0
<li>"<CODE>AP</CODE>": equal steps (except final one which may be shorter)

<p>
Example:
<pre>
% [nap "{3 5 7 7.1}"] step
AP
</pre>

<h4>Method <code>unit</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> unit</CODE><br>

<p>
This returns
the unit of measure.
This may be used in the future to support arithmetic with automatic unit
conversion, but at the moment it is just descriptive information.

<p>
Example:
<pre>
% $y set unit seconds
% $y unit
seconds
</pre>

<h3>Methods which Modify NAO</h3>

<h4>Method <code>draw</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> draw</CODE> <VAR>xy</VAR> ?<VAR>value</VAR>?<br>

<p>
This draws a polyline in the NAO
<VAR>ooc_name</VAR>, which must be type <code>f32</code> in the current version.
It sets data elements on the polyline defined by NAO <VAR>xy</VAR> to the value of
scalar NAO <VAR>value</VAR> (default: missing value).
NAO <VAR>xy</VAR> can be:
<li>matrix with 2 rows, row 0 is x values, row 1 is y values
<li>vector of y values with coordinate variable (CV) of x values
<li>vector of y values without CV (x defaults to 0 1 2 3 &hellip;)
<br>
The polyline is not closed, so to draw a polygon,
the first point should be duplicated at the end.

<p>
Example:
<pre>
% [nap "z = reshape(0f32, 2 # 5)"] draw y 1
% $z
1 0 0 0 0
0 1 0 0 0
0 1 0 0 0
0 0 1 0 0
0 0 1 0 0
</pre>

<h4>Method <code>fill</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> fill</CODE> <VAR>xy</VAR> ?<VAR>value</VAR>?<br>

<p>
This fills a polygon in the NAO
<VAR>ooc_name</VAR>, which must be type <code>f32</code> in the current version.
It sets data elements within the 
polygon defined by NAO <VAR>xy</VAR> to the value of
the scalar NAO <VAR>value</VAR> (default: missing value).<br>
NAO <VAR>xy</VAR> can be:
<li>matrix with 2 rows, row 0 is x values, row 1 is y values
<li>vector of y values with coordinate variable (CV) of x values
<li>vector of y values without CV (x defaults to 0 1 2 3 &hellip;)
<br>
The polygon is closed (unlike <code>draw</code> method).

<p>
Example:
<pre>
% [nap "z = reshape(0f32, 2 # 8)"] fill "{{2 2 4 4}{2 4 4 2}}" 1
% $z value
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 1 1 1 0 0 0
0 0 1 1 1 0 0 0
0 0 1 1 1 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
</pre>

<h4>Method <code>set</code></h4>

<p>
<VAR>ooc_name</VAR><CODE> set </code> <VAR>attribute arg arg</VAR> &hellip;

<p>
This modifies the NAO attribute specified by <VAR>attribute</VAR>.
The sub-methods corresponding to these attributes are discussed below
in separate sections.
Note that the names of these attributes is the same as that of
the method which returns their value.

<h5><CODE> set coordinate</CODE></h5>

<p>
<VAR>ooc_name</VAR><CODE> set coordinate</CODE> <VAR>coord_var</VAR> <VAR>coord_var</VAR> <VAR>coord_var</VAR> &hellip;<br>

<p>
This sets one or more coordinate variables.<br>
<VAR>coord_var</VAR> can be a name, OOC-name or <code>""</code>.
<br>
If <VAR>coord_var</VAR> is a valid name
then this is also used as dimension name if this is undefined.
<br>
If <VAR>coord_var</VAR> is 
<code>""</code> then any existing coordinate variable is removed.
<br>
If the number of <VAR>coord_var</VAR> 
arguments < rank then trailing values default
to <code>""</code>.
Thus the following command removes all coordinate variables:
<pre>
<VAR>ooc_name</VAR> se coo
</pre>

<p>
See above ("<b>Method</b> <code>coordinate</code>") for an example.

<h5><CODE> set count</CODE></h5>
<p>
<VAR>ooc_name</VAR><CODE> set count</CODE> ?<VAR>int</VAR>?
?<CODE>-keep</CODE>?<br>

<p>
This sets or increments the reference count.
One situation where this facility 
is needed is where a GUI window points to a NAO and must be retained
until the window is destroyed.
<BR><CODE>-keep</CODE>: Do not delete NAO (with new count = 0)<br>
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0
If <VAR>int</VAR> is signed then add it to reference count.<br>
If <VAR>int</VAR> is unsigned then set reference count to <VAR>int</VAR>.<br>
If <VAR>int</VAR> not specified then add 1 to reference count 
(i.e. treat as "+1")

  <h5><CODE> Set dimension</CODE></h5>
<p>
<VAR>ooc_name</VAR><CODE> set dimension</CODE> <VAR>dim_name</VAR> <VAR>dim_name</VAR> <VAR>dim_name</VAR> &hellip;<br>

<p>
This sets one or more dimension names.<br>
If <VAR>dim_name</VAR> is a tcl name pointing to a NAO then
this also defines the coordinate variable if this is undefined. 
<br>
If <VAR>dim_name</VAR> is 
<code>""</code> then any existing dimension name is removed.
<br>
If the number of <VAR>dim_name</VAR>s < rank then trailing values default to 
<code>""</code>.
Thus the following command removes all dimension names:
<pre>
<VAR>ooc_name</VAR> se d
</pre>

<p>
Example:
<pre>
% $x set dim time
% $x dim
</pre>

<h5><CODE> set label</CODE></h5>
<p>
<VAR>ooc_name</VAR><CODE> set label</CODE> ?<VAR>string</VAR>?<br>

<p>
This sets the label (title).
The default is NULL i.e. no label.

<p>
See above ("<b>Method</b> <code>label</code>") for an example.

  <h5><CODE> Set link</CODE></h5>
<p>
<VAR>ooc_name</VAR><CODE> set link</CODE> ?<VAR>nao</VAR>?<br>

<p>
This sets the link slot number to point to a NAO<br>
The default is NULL i.e. no link.

<p>
See above ("<b>Method</b> <code>link</code>") for an example.

  <h5><CODE> Set missing</CODE></h5>
<p>
<VAR>ooc_name</VAR><CODE> set missing</CODE> ?<VAR>value</VAR>?<br>

<p>
This sets the missing value.
The default is NULL i.e. no missing value.

<p>
Example:
<pre>
% $x set miss 0
% $x
_ 0.5 1 1.5 2
</pre>
Note that the value of 0 is now treated as missing.

  <h5><CODE> Set unit</CODE></h5>
<p>
<VAR>ooc_name</VAR><CODE> set unit</CODE> ?<VAR>unit</VAR>?<br>

<p>
This sets the unit of measure.
The default is NULL i.e.  no unit.

<p>
See above ("<b>Method</b> <code>unit</code>") for an example.

  <h5><CODE> Set value</CODE></h5>
<p>
<VAR>ooc_name</VAR><CODE> set value</CODE> ?<VAR>value</VAR>? ?<VAR>index</VAR>?<br>

<p>
This sets the value of
data elements selected by NAO <VAR>index</VAR> 
(default: <code>""</code> i.e.  whole array)
to new values copied from successive elements of NAO
<VAR>value</VAR>
(default: <code>""</code> meaning null value).
Elements of <VAR>value</VAR> are recycled if necessary.

<h3>Methods which Write to File or Internal Structure</h3>

<h4>Method <code>blt_vector</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> blt_vector</CODE> <VAR>name</VAR><br>

<p>
This sets the
BLT vector named <VAR>name</VAR> (which may or may not already exist) to 
the value of the data in the NAO. 

  <h4>Method <code>hdf</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> hdf</CODE> ?<VAR>switches</VAR>? <VAR>filename</VAR> <VAR>sds</VAR><br>

<p>
This writes data from the NAO to 
an SDS named <VAR>sds</VAR> within an HDF file named <VAR>filename</VAR>.<br>

<p>
    <VAR>switches</VAR> can be: <BR>
    <CODE>-unlimited</CODE>: Create sds with unlimited dimension 0
<BR><CODE>-coordinateVariable</CODE> <VAR>expr</VAR>: boxed NAO which 
specifies coordinate variables.
<BR><CODE>-datatype</CODE> <VAR>type</VAR>: HDF datatype: 
<code>c8, i8, i16, i32, u8, u16, u32, f32 </code>
or
<code>f64</code>
<BR><CODE>-range</CODE> <VAR>float</VAR>: HDF
<code> valid_range </code>
<BR><CODE>-scale</CODE> <VAR>float</VAR>: HDF 
<code> scale_factor </code>
<BR><CODE>-offset</CODE> <VAR>float</VAR>: HDF 
<code> add_offset </code>
<BR><CODE>-index</CODE> <VAR>expr</VAR>: position within SDS where
data is to be written. 

<p>
If 
&quot;<CODE>-coordinateVariable</CODE> <VAR>expr</VAR>&quot;
is not specified then the coordinate variables
of the main NAO are used if these exist.

<p>
If 
&quot;<CODE>-index</CODE> <VAR>expr</VAR>&quot;
is not specified then the coordinate variables
of the main NAO are used if these exist,
otherwise writing starts at the beginning of the SDS.

<p>
Example:
<pre>
% [nap "3 .. 7"] hdf simple.hdf vec
% exec hdp dumpsds simple.hdf
File name: simple.hdf 

Variable Name = vec
	 Index = 0
	 Type= 32-bit signed integer
	 Ref. = 2
	 Rank = 1
	 Number of attributes = 1
	 Dim0: Name=fakeDim0
		 Size = 5
		 Scale Type = number-type not set
		 Number of attributes = 0
	 Attr0: Name = _FillValue
		 Type = 32-bit signed integer 
		 Count= 1
		 Value = -2147483648 
	 Data : 
                3 4 5 6 7
</pre>

<h4>Method <code>netcdf</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> netcdf</CODE> ?<VAR>switches</VAR>? <VAR>filename</VAR> <VAR>var</VAR><br>

<p>
This writes data from the NAO to 
a netCDF variable named <VAR>var</VAR> within 
the netCDF file named <VAR>filename</VAR>.<br>

<p>
<VAR>switches</VAR> can be:
<BR><CODE>-unlimited</CODE>: Create variable with unlimited dimension 0
<BR><CODE>-coordinateVariable</CODE> <VAR>expr</VAR>: boxed NAO which 
specifies coordinate variables.
<BR><CODE>-datatype</CODE> <VAR>type</VAR>: netCDF datatype:
<code>c8, i16, i32, u8, f32 </code>
or
<code>f64</code>
<BR><CODE>-range</CODE> <VAR>float</VAR>: netCDF 
<code> valid_range </code>
<BR><CODE>-scale</CODE> <VAR>float</VAR>: netCDF
<code> scale_factor </code>
<BR><CODE>-offset</CODE> <VAR>float</VAR>: netCDF
<code> add_offset </code>

<BR><CODE>-index</CODE> <VAR>expr</VAR>: position within netCDF variable
where data is to be written. 

<p>
If 
&quot;<CODE>-coordinateVariable</CODE> <VAR>expr</VAR>&quot;
is not specified then the coordinate variables
of the main NAO are used if these exist.

<p>
If 
&quot;<CODE>-index</CODE> <VAR>expr</VAR>&quot;
is not specified then the coordinate variables
of the main NAO are used if these exist,
otherwise writing starts at the beginning of the netCDF variable.

<p>
Example:
<pre>
% $y net sq.nc area -coordinateVariable "x // {3 6 9}"
::NAP::241-241
% exec ncdump sq.nc
netcdf sq {
dimensions:
	x = 8 ;
variables:
	double x(x) ;
	double area(x) ;
		area:_FillValue = nan ;
		area:long_name = "areas of squares" ;
		area:units = "seconds" ;
data:

 x = 0, 0.5, 1, 1.5, 2, 3, 6, 9 ;

 area = 0, 0.25, 1, 2.25, 4, nan, nan, nan ;
}
</pre>
Note that the netCDF variable <code>area</code> is dimensioned to 8 
(the shape of the
argument specified by the
<nobr>
<code>-coordinateVariable</code>
</nobr>
option).

<h4>Method <code>write</code></h4>
<p>
<VAR>ooc_name</VAR><CODE> write</CODE> ?<VAR>tcl_channel</VAR>?<br>

<p>
This writes raw (binary) data to the file specified by
<VAR>tcl_channel</VAR>, 
which defaults to <CODE>stdout</CODE> (standard output).
For example:
<pre>
% set file [open y.tmp w]
file4
% $y write $file
% close $file
% set file [open y.tmp]
file4
% [nap_get binary $file f64] all
::NAP::248-248  f64  MissingValue: NaN  References: 0  Unit: (NULL)
Dimension 0   Size: 5      Name: (NULL)    Coordinate-variable: (NULL)
Value:
0 0.25 1 2.25 4
% close $file
</pre>

<P>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2" bgcolor="737b9c">
  <TR>
    <TD align="center"><FONT color="#ffffff" size=-2><SPAN class="titlebar">
        <b>Author:</b> <a href="http://sourceforge.net/users/dav480/">Harvey Davies</a>
        &nbsp; &nbsp; &nbsp;
        &copy; 2002, CSIRO Australia.
        &nbsp; &nbsp; &nbsp;
        <a href="http://www.csiro.au/legalnotices/disclaimer.html">Legal Notice and Disclaimer</a>
        <br>

        <b>CVS Version Details:</b> $Id: ooc.html,v 1.1 2002/08/07 08:09:24 dav480 Exp $
        </SPAN></FONT>
    </TD>
  </TR>
</TABLE>

</body>
</html>
