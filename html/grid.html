<!-- $Id: grid.html,v 1.1 2002/08/07 08:09:24 dav480 Exp $ -->
<html>

<head> <title>
NAP Grids
</title> </head>

<body>

<h2> <center>
Grids
</center> </h2>

Traditional array-processors, such as APL, are based on a data-model which
has discrete dimensions
whose corresponding subscripts take integer values.
NAP handles such traditional arrays in the traditional manner.
However NAP is based on a more general data-model which
also allows non-integer subscript values.
These values represent distances along 
dimensions which often correspond to the physical dimensions of
spacio-temporal spaces, which are of course continuous.

<p>
If desired, a dimension can have an associated variable called the
<em>coordinate variable</em>.
This is a vector which defines a piecewise-linear mapping from subscript to
physical dimension.

<p>
Data in a continuous space with two or more dimensions
can be either <em>gridded</em> or <em>scattered</em>.
NAP's data-model (with continuous subscripts, coordinate variables, etc.)
facilitates the processing of gridded data.

<p>
Let us consider the case of two dimensions i.e. matrices.
Two-dimensional <em>gridded</em> data is aligned in rows and columns,
whereas <em>scattered</em> data is not.
The following examples are intended to illustrate the difference between 
<em>scattered</em> and <em>gridded</em> 2D data.

<h3>Example of Scattered 2D Data (Not a Grid)</h3>

<p>
Note that the data are not aligned in rows and columns.

<p>
<table frame=box rules=none width="50%">

    <tr align="center">
	<td width="10%">
	<td width="10%">
	<td width="10%">
	<td width="10%"> &bull;
	<td width="10%">
	<td width="10%">
	<td width="10%">
	<td width="10%">
	<td width="10%">
	<td width="10%">

    <tr align="center">
	<td> &bull;
	<td colspan=5>
	<td> &bull;
	<td colspan=3>
    <tr align="center">
	<td colspan=4>
	<td> &bull;
	<td colspan=5>
    <tr align="center">
	<td colspan=3>
	<td> &bull;
	<td colspan=6>
    <tr align="center">
	<td colspan=2>
	<td> &bull;
	<td colspan=7>
    <tr align="center">
	<td colspan=8>
	<td> &bull;
	<td colspan=1>
    <tr align="center">
	<td colspan=5>
	<td> &bull;
	<td colspan=4>

</table>


<h3>Example of 2D Grid</h3>

<p>
The following example has the grid in black.
The blue point is not on the grid and has non-integer subscript
values (2.1, 1.6).
The coordinate variables are latitude and longitude.

<p>
<table border nowrap rules=groups>
    <colgroup span=3 align="right">
    <colgroup span=6>

    <thead>

    <tr align="center">
	<td height="8%">
	<td>
	<td>
	    column
	<td width="12%">
	    0
	<td width="13%">
	    1
	<td width="12%">
	    <font color="blue">
		1.6
	    </font>
	<td width="8%">
	    2
	<td width="9%">
	    3
	<td width="12%">
	    4

    <tr align="center">
	<td colspan=2>
	<td>
	    longitude
	<td>
	    30&deg;E
	<td>
	    40&deg;E
	<td>
	    <font color="blue">
		52&deg;E
	    </font>
	<td>
	    60&deg;E
	<td>
	    65&deg;E
	<td>
	    75&deg;E

    <tr>
	<td height="8%">
	    row
	<td align="right"> 
	    latitude
	<td>
	<td colspan=6> 

    <tbody>

    <tr align="center">
	<td align="left" height="7%">
	    0
	<td align="right"> 
	    30&deg;N
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td> &bull;
	<td> &bull;
	<td> &bull;

    <tr align="center">
	<td align="left" height="15%">
	    1
	<td align="right"> 
	    25&deg;N
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td> &bull;
	<td> &bull;
	<td> &bull;

    <tr align="center">
	<td align="left" height="13%">
	    2
	<td align="right"> 
	    10&deg;N
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td> &bull;
	<td> &bull;
	<td> &bull;

    <tr align="center">
	<td align="left" height="15%">
	    <font color="blue">
		2.1
	    </font>
	<td align="right"> 
	    <font color="blue">
		8&deg;N
	    </font>
	<td>
	<td>
	<td>
	<td>
	    <font color="blue">
		&bull;
	    </font>
	<td>
	<td>
	<td>

    <tr align="center">
	<td align="left" height="26%">
	    3
	<td align="right"> 
	    10&deg;S
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td> &bull;
	<td> &bull;
	<td> &bull;

</table>

<h3>Missing Data</h3>

The NAP data model allows any element of an array to have a value which is a
<em>missing-value</em>.
Such elements are considered null or missing and are treated specially in 
operations such as arithmetic.
Thus adding a missing value to anything produces a missing value.

<p>
The following example is similar to that above.
However four grid points are missing. 
These are shown in red.

<p>
<table border nowrap rules=groups>
    <colgroup span=3 align="right">
    <colgroup span=6>

    <thead>

    <tr align="center">
	<td height="8%">
	<td>
	<td>
	    column
	<td width="12%">
	    0
	<td width="13%">
	    1
	<td width="12%">
	    <font color="blue">
		1.6
	    </font>
	<td width="8%">
	    2
	<td width="9%">
	    3
	<td width="12%">
	    4

    <tr align="center">
	<td colspan=2>
	<td>
	    longitude
	<td>
	    30&deg;E
	<td>
	    40&deg;E
	<td>
	    <font color="blue">
		52&deg;E
	    </font>
	<td>
	    60&deg;E
	<td>
	    65&deg;E
	<td>
	    75&deg;E

    <tr>
	<td height="8%">
	    row
	<td align="right"> 
	    latitude
	<td>
	<td colspan=6> 

    <tbody>

    <tr align="center">
	<td align="left" height="7%">
	    0
	<td align="right"> 
	    30&deg;N
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td> &bull;
	<td>
	    <font color="red">
		&bull;
	    </font>
	<td> &bull;

    <tr align="center">
	<td align="left" height="15%">
	    1
	<td align="right"> 
	    25&deg;N
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td> &bull;
	<td> &bull;
	<td> &bull;

    <tr align="center">
	<td align="left" height="13%">
	    2
	<td align="right"> 
	    10&deg;N
	<td> 
	<td>
	    <font color="red">
		&bull;
	    </font>
	<td> &bull;
	<td>
	<td> &bull;
	<td> &bull;
	<td>
	    <font color="red">
		&bull;
	    </font>

    <tr align="center">
	<td align="left" height="15%">
	    <font color="blue">
		2.1
	    </font>
	<td align="right"> 
	    <font color="blue">
		8&deg;N
	    </font>
	<td>
	<td>
	<td>
	<td>
	    <font color="blue">
		&bull;
	    </font>
	<td>
	<td>
	<td>

    <tr align="center">
	<td align="left" height="26%">
	    3
	<td align="right"> 
	    10&deg;S
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td>
	    <font color="red">
		&bull;
	    </font>
	<td> &bull;
	<td> &bull;

</table>

<p>
The missing points are treated as if they did not exist,
as shown in the following:

<p>
<table border nowrap rules=groups>
    <colgroup span=3 align="right">
    <colgroup span=6>

    <thead>

    <tr align="center">
	<td height="8%">
	<td>
	<td>
	    column
	<td width="12%">
	    0
	<td width="13%">
	    1
	<td width="12%">
	    <font color="blue">
		1.6
	    </font>
	<td width="8%">
	    2
	<td width="9%">
	    3
	<td width="12%">
	    4

    <tr align="center">
	<td colspan=2>
	<td>
	    longitude
	<td>
	    30&deg;E
	<td>
	    40&deg;E
	<td>
	    <font color="blue">
		52&deg;E
	    </font>
	<td>
	    60&deg;E
	<td>
	    65&deg;E
	<td>
	    75&deg;E

    <tr>
	<td height="8%">
	    row
	<td align="right"> 
	    latitude
	<td>
	<td colspan=6> 

    <tbody>

    <tr align="center">
	<td align="left" height="7%">
	    0
	<td align="right"> 
	    30&deg;N
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td> &bull;
	<td>
	    <font color="red">
	    </font>
	<td> &bull;

    <tr align="center">
	<td align="left" height="15%">
	    1
	<td align="right"> 
	    25&deg;N
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td> &bull;
	<td> &bull;
	<td> &bull;

    <tr align="center">
	<td align="left" height="13%">
	    2
	<td align="right"> 
	    10&deg;N
	<td> 
	<td>
	    <font color="red">
	    </font>
	<td> &bull;
	<td>
	<td> &bull;
	<td> &bull;
	<td>
	    <font color="red">
	    </font>

    <tr align="center">
	<td align="left" height="15%">
	    <font color="blue">
		2.1
	    </font>
	<td align="right"> 
	    <font color="blue">
		8&deg;N
	    </font>
	<td>
	<td>
	<td>
	<td>
	    <font color="blue">
		&bull;
	    </font>
	<td>
	<td>
	<td>

    <tr align="center">
	<td align="left" height="26%">
	    3
	<td align="right"> 
	    10&deg;S
	<td> 
	<td> &bull;
	<td> &bull;
	<td>
	<td>
	    <font color="red">
	    </font>
	<td> &bull;
	<td> &bull;

</table>

<p>
It would be possible to represent scattered data by a grid with many missing
points.
In the extreme, each scattered point would have its own row and its own column.
There would be only one non-missing point in each row.
There would be only one non-missing point in each column.
Of course this would be very inefficient for a matrix of significant size.

<h3>Processing Scattered Data</h3>

<p>
NAP has no facilities for directly processing scattered data.
However it is possible to define a grid from scattered data.
This can be done by
<li>defining a least-squares best-fit n-dimensional surface and then
    using this to define the grid values
<li>using Delaunay triangulation (not yet implemented)

<p>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2" bgcolor="737b9c">
  <TR>
    <TD align="center"><FONT color="#ffffff" size=-2><SPAN class="titlebar">
	&copy; 2002, CSIRO Australia.  Author: Harvey.Davies@CSIRO.AU<br>
	CVS Version Details: $Id: grid.html,v 1.1 2002/08/07 08:09:24 dav480 Exp $
        </SPAN></FONT>
    </TD>
  </TR>
</TABLE>

</body>
</html>
