<!-- $Id: ooc_data.html,v 1.2 2004/10/25 09:01:26 dav480 Exp $ -->
<html>

<head> <title>
OOC Methods: Data
</title> </head>

<body>

<h2> <center>
OOC Methods which return Data Values (with or without metadata)
</center> </h2>

<h3>Table of Contents</h3>

<ol>
    <li><a href="#all">Method <code>all</code></a>
    <li><a href="#value">Method <code>value</code></a>
    <li><a href="#default_method">Default method</a>
    <li><a href="#format_strings">Format Conversion Strings</a>
</ol>

<h3><a name=all>Method <code>all</code></h3>
<p>
<VAR>ooc_name</VAR><CODE> all</CODE>
<CODE>-format</CODE> <VAR>format</VAR>
<CODE>-columns</CODE> <VAR>int</VAR>
<CODE>-lines</CODE> <VAR>int</VAR>
<CODE>-missing</CODE> <VAR>text</VAR>
<CODE>-keep</CODE><br>

<p>
This provides both data and metadata from a NAO.
However it does not provide <em>all</em> information despite the name!

<p>
        The following switches are allowed:
<BR><CODE>-format</CODE> <VAR>format</VAR>: C format (default: Use internal format if any,
else "" meaning automatic)
<BR><CODE>-columns</CODE> <VAR>int</VAR>: maximum # columns (default:  6) (<code>-1</code>: no limit)
<BR><CODE>-lines</CODE> <VAR>int</VAR>:   maximum # lines   (default: 20) (<code>-1</code>: no limit)
<BR><CODE>-list</CODE>: print in tcl list form (using braces) e.g. "<code>{1 9 2}</code>"
<BR><CODE>-missing</CODE> <VAR>text</VAR>: text printed for missing value (default: "_")
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0

<p>
The <code>all</code> method provides the same information as the two commands:
<br>
<VAR>ooc_name</VAR><CODE> header</CODE><br>
<VAR>ooc_name</VAR><CODE> value</CODE>
<CODE>-format</CODE> <VAR>format</VAR>
<CODE>-columns</CODE> <VAR>int</VAR>
<CODE>-lines</CODE> <VAR>int</VAR>
<CODE>-missing</CODE> <VAR>text</VAR><br>

<h4>
Example
</h4>

<pre>
% [nap "{3#2 2#_ -9}"] all -miss n/a
::NAP::39-39  i32  MissingValue: -2147483648  References: 0  Unit: (NULL)
Dimension 0   Size: 6      Name: (NULL)    Coordinate-variable: (NULL)
Value:
2 2 2 n/a n/a -9
</pre>

<h3><a name=value>Method <code>value</code></h3>
<p>
<VAR>ooc_name</VAR><CODE> value</CODE>
<CODE>-format</CODE> <VAR>format</VAR>
<CODE>-columns</CODE> <VAR>int</VAR>
<CODE>-lines</CODE> <VAR>int</VAR>
<CODE>-missing</CODE> <VAR>text</VAR>
<CODE>-keep</CODE><br>

<p>
This returns data values.
The default value is <code>-1</code> for both
the switches <CODE>-columns</CODE> and <CODE>-lines</CODE>,
giving the entire array.

<p>
The following switches are allowed:
<BR><CODE>-format</CODE> <VAR>format</VAR>: C format (default: Use internal format if any,
else "" meaning automatic)
<BR><CODE>-columns</CODE> <VAR>int</VAR>: maximum # columns (default: <code>-1</code> i.e. no limit)
<BR><CODE>-lines</CODE>   <VAR>int</VAR>: maximum # lines   (default: <code>-1</code> i.e. no limit)
<BR><CODE>-list</CODE>: print in tcl list form (using braces) e.g. "<code>{1 9 2}</code>"
<BR><CODE>-missing</CODE> <VAR>text</VAR>: text printed for missing value (default: "_")
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0

<h4>
Example
</h4>

<pre>
% nap "y = (0 .. 2 ... 0.5) ** 2"
::NAP::61-61
% $y val -format %0.3f
0.000 0.250 1.000 2.250 4.000
</pre>

<h3><a name=default_method>Default method</h3>
<p>
<var>ooc_name</var>
<CODE>-format</CODE> <var>format</var>
<CODE>-columns</CODE> <var>int</var>
<CODE>-lines</CODE> <var>int</var>
<CODE>-missing</CODE> <var>text</var>
<CODE>-keep</CODE><br>

<p>
This returns data values in a similar fashion to the
<code>value</code> method, except that default line and column
limits restrict the size.

<p>
The following switches are allowed:
<BR><CODE>-format</CODE> <VAR>format</VAR>: C format (default: Use internal format if any,
else "" meaning automatic)
<BR><CODE>-columns</CODE> <var>int</var>: maximum # columns 
(default: <code>6</code>) (<code>-1</code>: no limit)
<BR><CODE>-lines</CODE> <var>int</var>: maximum # lines (default: 
<code>20</code>) (<code>-1</code>: no limit)
<BR><CODE>-list</CODE>: print in tcl list form (using braces) e.g. "<code>{1 9 2}</code>"
<BR><CODE>-missing</CODE> <VAR>text</VAR>: text printed for missing value 
(default: <code>"_"</code>)
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0

<h4>
Examples
</h4>

The following example shows why and how to use switch <code>-columns</code>
(abbreviated to <code>-c</code>):
<pre>
% nap "m = reshape(0 .. 99, {10 12})"
::NAP::50-50
% $m
 0  1  2  3  4  5 ..
12 13 14 15 16 17 ..
24 25 26 27 28 29 ..
36 37 38 39 40 41 ..
48 49 50 51 52 53 ..
60 61 62 63 64 65 ..
72 73 74 75 76 77 ..
84 85 86 87 88 89 ..
96 97 98 99  0  1 ..
 8  9 10 11 12 13 ..
% $m -c -1
 0  1  2  3  4  5  6  7  8  9 10 11
12 13 14 15 16 17 18 19 20 21 22 23
24 25 26 27 28 29 30 31 32 33 34 35
36 37 38 39 40 41 42 43 44 45 46 47
48 49 50 51 52 53 54 55 56 57 58 59
60 61 62 63 64 65 66 67 68 69 70 71
72 73 74 75 76 77 78 79 80 81 82 83
84 85 86 87 88 89 90 91 92 93 94 95
96 97 98 99  0  1  2  3  4  5  6  7
 8  9 10 11 12 13 14 15 16 17 18 19
</pre>

<p>
The following example shows how to use switch <code>-format</code>
(abbreviated to <code>-f</code>) to include a dollar prefix and display
two decimal places:
<pre>
% [nap "{15 3.2 999}"] -f {$%.2f}
$15.00 $3.20 $999.00
</pre>

<p>
The following example shows how to use switch <code>-list</code>:
<pre>
% [nap "reshape(1.5 .. -1.5, {2 5})"] -list
{
{  1.5  0.5 -0.5 -1.5  1.5 }
{  0.5 -0.5 -1.5  1.5  0.5 }
}
</pre>

<h3><a name=format_strings>Format Conversion Strings</h3>

<p>
The <code>-format</code> option 
(or NAO internal <em>format</em> field)
specifies a <i>format conversion string</i>
similar to that used in the standard Tcl <code>format</code> command
(which is based on the ANSI C <code>sprintf()</code> function).
Such strings have the form <br>
<code>%</code>[<var>flags</var>][<var>width</var>][<code>.</code><var>precision</var>]<var>char</var>
<br>
where:
<ul>

    <li>
	<var>flags</var> is a string containing any of the following characters in any order:
	    <br>
	    <code>-</code>: left justify
	    <br>
	    <code>+</code>: include sign
	    <br>
	    <em>space</em>: include space prefix if no sign
	    <br>
	    <code>0</code>: leading zeros
	    <br>
	    <code>#</code>: alternate form

    <li>
	<var>width</var> is the minimum field width

    <li>
	<var>precision</var> is the
	    <ul>
		<li>
		    minimum number of digits for 
		    <code>d</code>,
		    <code>i</code>,
		    <code>o</code>,
		    <code>x</code>,
		    <code>X</code>
		    or
		    <code>u</code>
		    conversions.
		<li>
		    number of digits after &quot;.&quot; for
		    <code>e</code>, <code>E</code> or <code>f</code> conversions.
		<li>
		    number of significant digits for <code>g</code> or <code>G</code> conversions.
	    </ul>

    <li>
	<var>char</var> specifies conversion as in the following table:

<table border>

  <tr>
    <td align=center><var>char</var>
    <th align=center>Convert to

<tbody>

  <tr> <td> <code>
	<code>d</code>, <code>i</code>
  </code> <td>
	signed decimal integer

  <tr valign=top> <td> <code>
	<code>o</code>
  </code> <td>
	unsigned octal integer

  <tr valign=top> <td> <code>
	<code>x</code>, <code>X</code>
  </code> <td>
	unsigned hexadecimal integer

  <tr valign=top> <td> <code>
	<code>u</code>
  </code> <td>
	unsigned decimal integer

  <tr valign=top> <td> <code>
	<code>c</code>
  </code> <td>
	character

  <tr valign=top> <td> <code>
	<code>f</code>
  </code> <td>
    decimal number in form 
    [<code>-</code>]<var>mmm</var><code>.</code><var>ddd</var>,
    <br>
    where number of <var>d</var>s is specified by the <var>precision</var>.
    <br>
    Default <var>precision</var> is 6;
    <var>precision</var> of 0 suppresses the &quot;<code>.</code>&quot;.

  <tr valign=top> <td> <code>
	<code>e</code>, <code>E</code>
  </code> <td>
    decimal number in form 
    [<code>-</code>]<var>m</var><code>.</code><var>dddddd</var><code>e</code>&plusmn;<var>xx</var>
    or
    [<code>-</code>]<var>m</var><code>.</code><var>dddddd</var><code>E</code>&plusmn;<var>xx</var>,
    <br>
    where number of <var>d</var>s is specified by the <var>precision</var>.
    <br>
    Default <var>precision</var> is 6;
    <var>precision</var> of 0 suppresses the &quot;<code>.</code>&quot;.

  <tr valign=top> <td> <code>
	<code>g</code>, <code>G</code>
  </code> <td>
    <code>%e</code>
    or
    <code>%E</code>
    are used if <var>exponent</var> &lt; &minus;4 or 
    <var>exponent</var> &ge; <var>precision</var>; 
    <br>
    otherwise 
    <code>%f</code>
    is used.
    <br>
    Trailing zeros and decimal points are suppressed.

</table>

</ul>

<p>
The following example displays the same data using each of these codes.
Note that
(unlike C and the standard Tcl <code>format</code> command)
any data-type can be displayed with any code.

<pre>
% foreach code {d i o x X u c f E e g G} {
    puts "$code: [[nap "88 .. 92"] -f "%$code"]"
}
d: 88 89 90 91 92
i: 88 89 90 91 92
o: 130 131 132 133 134
x: 58 59 5a 5b 5c
X: 58 59 5A 5B 5C
u: 88 89 90 91 92
c: XYZ[\
f: 88.000000 89.000000 90.000000 91.000000 92.000000
E: 8.800000E+01 8.900000E+01 9.000000E+01 9.100000E+01 9.200000E+01
e: 8.800000e+01 8.900000e+01 9.000000e+01 9.100000e+01 9.200000e+01
g: 88 89 90 91 92
G: 88 89 90 91 92
</pre>

<P>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2" bgcolor="737b9c">
  <TR>
    <TD align="center"><FONT color="#ffffff" size=-2><SPAN class="titlebar">
        <b>Author:</b> <a href="http://sourceforge.net/users/dav480/">Harvey Davies</a>
        &nbsp; &nbsp; &nbsp;
        &copy; 2002, CSIRO Australia.
        &nbsp; &nbsp; &nbsp;
        <a href="http://www.csiro.au/legalnotices/disclaimer.html">Legal Notice and Disclaimer</a>
        <br>

        <b>CVS Version Details:</b> $Id: ooc_data.html,v 1.2 2004/10/25 09:01:26 dav480 Exp $
        </SPAN></FONT>
    </TD>
  </TR>
</TABLE>

</body>
</html>
