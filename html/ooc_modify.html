<!-- $Id: ooc_modify.html,v 1.2 2004/10/25 09:01:26 dav480 Exp $ -->
<html>

<head> <title>
OOC Methods: Modify
</title> </head>

<body>

<h2> <center>
OOC Methods which Modify NAO
</center> </h2>

<h3>Table of Contents</h3>

<ol>
    <li><a href="#draw">Method <code>draw</code></a>
    <li><a href="#fill">Method <code>fill</code></a>
    <li><a href="#set">Method <code>set</code></a>
    <ol>
	<li><a href="#set_coordinate">set coordinate</CODE></a>
	<li><a href="#set_count">set count</CODE></a>
	<li><a href="#set_dimension">Set dimension</CODE></a>
	<li><a href="#set_format">set format</CODE></a>
	<li><a href="#set_label">set label</CODE></a>
	<li><a href="#set_link">Set link</CODE></a>
	<li><a href="#set_missing">Set missing</CODE></a>
	<li><a href="#set_unit">Set unit</CODE></a>
	<li><a href="#set_value">Set value</CODE></a>
    </ol>
</ol>


<h3><a name=draw>Method <code>draw</code></h3>
<p>
<VAR>ooc_name</VAR><CODE> draw</CODE> <VAR>xy</VAR> ?<VAR>value</VAR>?<br>

<p>
This draws a polyline in the NAO
<VAR>ooc_name</VAR>, which must be type <code>f32</code> in the current version.
It sets data elements on the polyline defined by NAO <VAR>xy</VAR> to the value of
scalar NAO <VAR>value</VAR> (default: missing value).
NAO <VAR>xy</VAR> can be:
<li>matrix with 2 rows, row 0 is x values, row 1 is y values
<li>vector of y values with coordinate variable (CV) of x values
<li>vector of y values without CV (x defaults to 0 1 2 3 &hellip;)
<br>
The polyline is not closed, so to draw a polygon,
the first point should be duplicated at the end.

<p>
Example:
<pre>
% [nap "z = reshape(0f32, 2 # 5)"] draw y 1
% $z
1 0 0 0 0
0 1 0 0 0
0 1 0 0 0
0 0 1 0 0
0 0 1 0 0
</pre>

<h3><a name=fill>Method <code>fill</code></h3>
<p>
<VAR>ooc_name</VAR><CODE> fill</CODE> <VAR>xy</VAR> ?<VAR>value</VAR>?<br>

<p>
This fills a polygon in the NAO
<VAR>ooc_name</VAR>, which must be type <code>f32</code> in the current version.
It sets data elements within the 
polygon defined by NAO <VAR>xy</VAR> to the value of
the scalar NAO <VAR>value</VAR> (default: missing value).<br>
NAO <VAR>xy</VAR> can be:
<li>matrix with 2 rows, row 0 is x values, row 1 is y values
<li>vector of y values with coordinate variable (CV) of x values
<li>vector of y values without CV (x defaults to 0 1 2 3 &hellip;)
<br>
The polygon is closed (unlike <code>draw</code> method).

<p>
Example:
<pre>
% [nap "z = reshape(0f32, 2 # 8)"] fill "{{2 2 4 4}{2 4 4 2}}" 1
% $z value
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 1 1 1 0 0 0
0 0 1 1 1 0 0 0
0 0 1 1 1 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0
</pre>

<h3><a name=set>Method <code>set</code></h3>

<p>
<VAR>ooc_name</VAR><CODE> set </code> <VAR>attribute arg arg</VAR> &hellip;

<p>
This modifies the NAO attribute specified by <VAR>attribute</VAR>.
The sub-methods corresponding to these attributes are discussed below
in separate sections.
Note that the names of these attributes is the same as that of
the method which returns their value.

<h4><a name=set_coordinate>set coordinate</CODE></h4>

<p>
<VAR>ooc_name</VAR><CODE> set coordinate</CODE> <VAR>coord_var</VAR> <VAR>coord_var</VAR> <VAR>coord_var</VAR> &hellip;<br>

<p>
This sets one or more coordinate variables.<br>
<VAR>coord_var</VAR> can be a name, OOC-name or <code>""</code>.
<br>
If <VAR>coord_var</VAR> is a valid name
then this is also used as dimension name if this is undefined.
<br>
If <VAR>coord_var</VAR> is 
<code>""</code> then any existing coordinate variable is removed.
<br>
If the number of <VAR>coord_var</VAR> 
arguments < rank then trailing values default
to <code>""</code>.
Thus the following command removes all coordinate variables:
<pre>
<VAR>ooc_name</VAR> se coo
</pre>

<p>
An example is provided in
<a href="ooc_meta.html#coordinate">Method <code>coordinate</code></a>.

<h4><a name=set_count>set count</CODE></h4>
<p>
<VAR>ooc_name</VAR><CODE> set count</CODE> ?<VAR>int</VAR>?
?<CODE>-keep</CODE>?<br>

<p>
This sets or increments the reference count.
One situation where this facility 
is needed is where a GUI window points to a NAO and must be retained
until the window is destroyed.
<BR><CODE>-keep</CODE>: Do not delete NAO (with new count = 0)<br>
<BR><CODE>-keep</CODE>: Do not delete NAO with reference count of 0
If <VAR>int</VAR> is signed then add it to reference count.<br>
If <VAR>int</VAR> is unsigned then set reference count to <VAR>int</VAR>.<br>
If <VAR>int</VAR> not specified then add 1 to reference count 
(i.e. treat as "+1")

<h4><a name=set_dimension>Set dimension</CODE></h4>
<p>
<VAR>ooc_name</VAR><CODE> set dimension</CODE> <VAR>dim_name</VAR> <VAR>dim_name</VAR> <VAR>dim_name</VAR> &hellip;<br>

<p>
This sets one or more dimension names.<br>
If <VAR>dim_name</VAR> is a tcl name pointing to a NAO then
this also defines the coordinate variable if this is undefined. 
<br>
If <VAR>dim_name</VAR> is 
<code>""</code> then any existing dimension name is removed.
<br>
If the number of <VAR>dim_name</VAR>s < rank then trailing values default to 
<code>""</code>.
Thus the following command removes all dimension names:
<pre>
<VAR>ooc_name</VAR> se d
</pre>

<p>
Example:
<pre>
% $x set dim time
% $x dim
</pre>

<h4><a name=set_format>set format</CODE></h4>
<p>
<VAR>ooc_name</VAR><CODE> set format</CODE> ?<VAR>string</VAR>?<br>

<p>
This sets the C format for printing.
The default is NULL i.e. no format.

<p>
An example is provided in
<a href="ooc_meta.html#format">Method <code>format</code></a>.

<h4><a name=set_label>set label</CODE></h4>
<p>
<VAR>ooc_name</VAR><CODE> set label</CODE> ?<VAR>string</VAR>?<br>

<p>
This sets the label (title).
The default is NULL i.e. no label.

<p>
An example is provided in
<a href="ooc_meta.html#label">Method <code>label</code></a>.

<h4><a name=set_link>Set link</CODE></h4>
<p>
<VAR>ooc_name</VAR><CODE> set link</CODE> ?<VAR>nao</VAR>?<br>

<p>
This sets the link slot number to point to a NAO<br>
The default is NULL i.e. no link.

<p>
An example is provided in
<a href="ooc_meta.html#link">Method <code>link</code></a>.

<h4><a name=set_missing>Set missing</CODE></h4>
<p>
<VAR>ooc_name</VAR><CODE> set missing</CODE> ?<VAR>value</VAR>?<br>

<p>
This sets the missing value.
The default is NULL i.e. no missing value.

<p>
Example:
<pre>
% $x set miss 0
% $x
_ 0.5 1 1.5 2
</pre>
Note that the value of 0 is now treated as missing.

<h4><a name=set_unit>Set unit</CODE></h4>
<p>
<VAR>ooc_name</VAR><CODE> set unit</CODE> ?<VAR>unit</VAR>?<br>

<p>
This sets the unit of measure.
The default is NULL i.e.  no unit.

<p>
An example is provided in
<a href="ooc_meta.html#unit">Method <code>unit</code></a>.

<h4><a name=set_value>Set value</CODE></h4>
<p>
<VAR>ooc_name</VAR><CODE> set value</CODE> ?<VAR>value</VAR>? ?<VAR>index</VAR>?<br>

<p>
This sets the value of
data elements selected by NAO <VAR>index</VAR> 
to new values copied from successive elements of NAO
<VAR>value</VAR>.

<p>
If <VAR>value</VAR> is absent or
<code>""</code>
it is treated as the null (missing) value.
Elements of <VAR>value</VAR> are recycled if necessary.

<p>
If <VAR>index</VAR> is absent or
<code>""</code>
it is treated as the whole array.
The <VAR>index</VAR> expression can include the operators
&quot;<code>,</code>&quot;
(giving <a href="indexing.html#Cross_product_index">cross-product-indexing</a>)
and
&quot;<code>@@</code>&quot;
(giving <a href="indexing.html#indirect_indexing">indirect indexing</a>).
However <a href="indexing.html#Full_index">full-indexing</a>
is not yet implemented.

<p>
Note that the NAP assignment operator 
&quot;<code>=</code>&quot;
does not allow its left operand to be indexed, as in 
&quot;<code>v(2) = 9</code>&quot;.
However the &quot;<code>set value</code>&quot; method does provide a way to modify
all or part of an array.
The following example sets element 2 of <code>v</code> to 9:

<pre>
% nap "v = {3 6 4 7}"
::NAP::52-52
% $v set value 9 2
% $v
3 6 9 7
</pre>

<p>
The following example changes elements 1 to 3.
Note how the elements of <VAR>value</VAR> are recycled.

<pre>
% $v set value "{8 5}" "1 .. 3"
% $v
3 8 5 8
</pre>

<p>
The following example illustrates indirect indexing:

<pre>
% $v set coo "10 .. 40 ... 10"
% $v set value 0 "@@{20 40}"
% $v
3 0 5 0
</pre>

<p>
The following example illustrates cross-product indexing:

<pre>
% [nap "matrix = {{0 2 4}{1 3 5}}"]
0 2 4
1 3 5
% $matrix set v 9 0,2; # Note that 'value' can be abbreviated to 'v'
% $matrix
0 2 9
1 3 5
% $matrix set v "-1 .. -9" ",{0 2}"
% $matrix
-1  2 -2
-3  3 -4
</pre>

<P>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2" bgcolor="737b9c">
  <TR>
    <TD align="center"><FONT color="#ffffff" size=-2><SPAN class="titlebar">
        <b>Author:</b> <a href="http://sourceforge.net/users/dav480/">Harvey Davies</a>
        &nbsp; &nbsp; &nbsp;
        &copy; 2002, CSIRO Australia.
        &nbsp; &nbsp; &nbsp;
        <a href="http://www.csiro.au/legalnotices/disclaimer.html">Legal Notice and Disclaimer</a>
        <br>

        <b>CVS Version Details:</b> $Id: ooc_modify.html,v 1.2 2004/10/25 09:01:26 dav480 Exp $
        </SPAN></FONT>
    </TD>
  </TR>
</TABLE>

</body>
</html>
