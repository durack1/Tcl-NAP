<!-- $Id: date_proc.html,v 1.2 2004/10/26 01:48:55 dav480 Exp $ -->
<html>

<head> <title>
NAP Library: date.tcl procedures
</title> </head>

<body>

<h2> <center>
Procedures for Formatting Dates and Times
</center> </h2>

<h3>Table of Contents</h3>

<ol>
    <li><a href="#Introduction">Introduction</a>
    <li><a href="#format_jdn">Formatting Julian Day Numbers (JDNs)</a>
    <li><a href="#format_mjd">Formatting Modified Julian Dates (MJDs)</a>
</ol>

<h3><a name=Introduction>Introduction</h3>

Date/time concepts are introduced in
<a href="date_function.html#Introduction">Functions for Formatting Dates and Times</a>.
The file <code>date.tcl</code> defines the two formatting procedures
<code>format_jdn</code>
and
<code>format_mjd</code>,
as well as these functions.

<p>
These two formatting procedures use the standard Tcl 
<code>clock</code>
command.
The range of dates which 
<code>clock</code>
can handle depends on the platform.
The current (8.4.7) Windows version uses a 32-bit signed integer offset (seconds) from
1970-01-01, allowing dates from 1901-12-13 to 2038-01-19.

<h3>
<a name=format_jdn>
Formatting Julian Day Numbers (JDNs)
</h3>

The command
<br>
<code>format_jdn </code><var>jdn</var> [<var>format</var>]
<br>
formats the Julian Day Number <var>jdn</var>, one value per line.

<p>
<var>jdn</var> can be any NAP expression.

<p>
<var>format</var> is that required for the
<code>clock</code>
command.
The default format is
<code>"%Y-%m-%d"</code>,
which produces a standard ISO 8601 date in the form "yyyy-mm-dd".

<h4>
Examples
</h4>

<pre>
% format_jdn 2453305
2004-10-26
% format_jdn 2453305 "%A %B %d, %Y"
Tuesday October 26, 2004
% format_jdn "{0 7} + date2jdn{2004 10 22}"
2004-10-22
2004-10-29
% format_jdn "{0 7} + date2jdn{2004 10 22}" "%y %m %d"
04 10 22
04 10 29
</pre>

<h3>
<a name=format_mjd>
Formatting Modified Julian Dates (MJDs)
</h3>

The command
<br>
<code>format_mjd </code><var>mjd</var> [<var>format</var>]
<br>
formats the Modified Julian Date <var>mjd</var>, one value per line.

<p>
<var>mjd</var> can be any NAP expression.
This is rounded to the nearest second.

<p>
<var>format</var> is that required for the
<code>clock</code>
command.
The default format is
<code>"%Y-%m-%dT%H:%M:%S"</code>,
which produces a standard ISO 8601 date/time in the form "yyyy-mm-ddTHH:MM:SS". 

<h4>
Examples
</h4>

<pre>
% format_mjd 49797.75
1995-03-21T18:00:00
% format_mjd 49797.75 "%I %p on %A %d %B, %Y."
06 PM on Tuesday 21 March, 1995.
% format_mjd "{0 0.5} + dateTime2mjd{2004 10 22 16 30 59}"
2004-10-22T16:30:59
2004-10-23T04:30:59
% format_mjd "{0 0.5} + dateTime2mjd{2004 10 22 16 30 59}" "%y%m%d %H%M"
041022 1630
041023 0430
</pre>

<P>
<TABLE width="100%" border="0" cellspacing="0" cellpadding="2" bgcolor="737b9c">
  <TR>
    <TD align="center"><FONT color="#ffffff" size=-2><SPAN class="titlebar">
        <b>Author:</b> <a href="http://sourceforge.net/users/dav480/">Harvey Davies</a>
        &nbsp; &nbsp; &nbsp;
        &copy; 2002, CSIRO Australia.
        &nbsp; &nbsp; &nbsp;
        <a href="http://www.csiro.au/legalnotices/disclaimer.html">Legal Notice and Disclaimer</a>
        <br>

        <b>CVS Version Details:</b> $Id: date_proc.html,v 1.2 2004/10/26 01:48:55 dav480 Exp $
        </SPAN></FONT>
    </TD>
  </TR>
</TABLE>

</body>
</html>
